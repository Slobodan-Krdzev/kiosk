import { useContext } from "react";
import { DataContext } from "../../../Contexts/DataContext/Datacontext";
import { OrderContext } from "../../../Contexts/OrderContext/OrderContext";
import { StepContext } from "../../../Contexts/StepContext/StepContext";
import Elipse from "../../Reusables/Elipse/Elipse";
import styles from "./PaymentStyles.module.css";
import { motion } from "framer-motion";

const Payment = () => {
  const { orders, getOrderTotal } = useContext(OrderContext);
  const { handleStepChange, setFinalOrderDetails } = useContext(StepContext);
  const { theme } = useContext(DataContext);

  console.log("ORDERS FROM PAYMENT", orders);

  return (
    <motion.section
      key={"payment"}
      initial={{ x: "-100vw" }}
      animate={{ x: 0 }}
      exit={{ x: "100vw" }}
      transition={{ type: "spring", stiffness: 300, damping: 30 }}
      className={`fullScreenTablet`}
    >
      <p className="biggerPageTitles fontSF">PAYMENT</p>

      <div className={styles.midSection}>
        <p className={`${styles.subTitle} fontSF`}>
          Please scan your QR code
        </p>

        <button
          className={`fontSF ${styles.qrCode}`}
          style={{
            color: theme.textColor,
            borderColor: theme.activeTextColor,
            outline: `10px solid ${theme.activeTextColor}`,
            borderRadius: "20px",
          }}
          onClick={() => {
            handleStepChange("finnish");

            setFinalOrderDetails(orders);

            console.log({
              orderNO: +new Date().valueOf().toFixed(2),
              orders,
              total: getOrderTotal(),
            });
          }}
        >
          <svg
            width="147"
            height="147"
            viewBox="0 0 147 147"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M52.7225 0.680664H11.089C8.32855 0.680664 5.68115 1.77725 3.7292 3.7292C1.77725 5.68115 0.680664 8.32855 0.680664 11.089V52.7225C0.680664 55.4829 1.77725 58.1303 3.7292 60.0823C5.68115 62.0342 8.32855 63.1308 11.089 63.1308H52.7225C55.4829 63.1308 58.1303 62.0342 60.0823 60.0823C62.0342 58.1303 63.1308 55.4829 63.1308 52.7225V11.089C63.1308 8.32855 62.0342 5.68115 60.0823 3.7292C58.1303 1.77725 55.4829 0.680664 52.7225 0.680664ZM56.1919 52.7225C56.1919 53.6426 55.8264 54.5251 55.1757 55.1757C54.5251 55.8264 53.6426 56.1919 52.7225 56.1919H11.089C10.1689 56.1919 9.2864 55.8264 8.63575 55.1757C7.9851 54.5251 7.61957 53.6426 7.61957 52.7225V11.089C7.61957 10.1689 7.9851 9.2864 8.63575 8.63575C9.2864 7.9851 10.1689 7.61957 11.089 7.61957H52.7225C53.6426 7.61957 54.5251 7.9851 55.1757 8.63575C55.8264 9.2864 56.1919 10.1689 56.1919 11.089V52.7225ZM52.7225 83.9475H11.089C8.32855 83.9475 5.68115 85.0441 3.7292 86.9961C1.77725 88.948 0.680664 91.5954 0.680664 94.3559V135.989C0.680664 138.75 1.77725 141.397 3.7292 143.349C5.68115 145.301 8.32855 146.398 11.089 146.398H52.7225C55.4829 146.398 58.1303 145.301 60.0823 143.349C62.0342 141.397 63.1308 138.75 63.1308 135.989V94.3559C63.1308 91.5954 62.0342 88.948 60.0823 86.9961C58.1303 85.0441 55.4829 83.9475 52.7225 83.9475ZM56.1919 135.989C56.1919 136.909 55.8264 137.792 55.1757 138.443C54.5251 139.093 53.6426 139.459 52.7225 139.459H11.089C10.1689 139.459 9.2864 139.093 8.63575 138.443C7.9851 137.792 7.61957 136.909 7.61957 135.989V94.3559C7.61957 93.4357 7.9851 92.5533 8.63575 91.9026C9.2864 91.252 10.1689 90.8864 11.089 90.8864H52.7225C53.6426 90.8864 54.5251 91.252 55.1757 91.9026C55.8264 92.5533 56.1919 93.4357 56.1919 94.3559V135.989ZM135.989 0.680664H94.3559C91.5954 0.680664 88.948 1.77725 86.9961 3.7292C85.0441 5.68115 83.9475 8.32855 83.9475 11.089V52.7225C83.9475 55.4829 85.0441 58.1303 86.9961 60.0823C88.948 62.0342 91.5954 63.1308 94.3559 63.1308H135.989C138.75 63.1308 141.397 62.0342 143.349 60.0823C145.301 58.1303 146.398 55.4829 146.398 52.7225V11.089C146.398 8.32855 145.301 5.68115 143.349 3.7292C141.397 1.77725 138.75 0.680664 135.989 0.680664ZM139.459 52.7225C139.459 53.6426 139.093 54.5251 138.443 55.1757C137.792 55.8264 136.909 56.1919 135.989 56.1919H94.3559C93.4357 56.1919 92.5533 55.8264 91.9026 55.1757C91.252 54.5251 90.8864 53.6426 90.8864 52.7225V11.089C90.8864 10.1689 91.252 9.2864 91.9026 8.63575C92.5533 7.9851 93.4357 7.61957 94.3559 7.61957H135.989C136.909 7.61957 137.792 7.9851 138.443 8.63575C139.093 9.2864 139.459 10.1689 139.459 11.089V52.7225ZM83.9475 115.173V87.417C83.9475 86.4968 84.313 85.6143 84.9637 84.9637C85.6143 84.313 86.4968 83.9475 87.417 83.9475C88.3371 83.9475 89.2196 84.313 89.8702 84.9637C90.5209 85.6143 90.8864 86.4968 90.8864 87.417V115.173C90.8864 116.093 90.5209 116.975 89.8702 117.626C89.2196 118.277 88.3371 118.642 87.417 118.642C86.4968 118.642 85.6143 118.277 84.9637 117.626C84.313 116.975 83.9475 116.093 83.9475 115.173ZM146.398 101.295C146.398 102.215 146.032 103.097 145.381 103.748C144.731 104.399 143.848 104.764 142.928 104.764H118.642V142.928C118.642 143.848 118.277 144.731 117.626 145.381C116.975 146.032 116.093 146.398 115.173 146.398H87.417C86.4968 146.398 85.6143 146.032 84.9637 145.381C84.313 144.731 83.9475 143.848 83.9475 142.928C83.9475 142.008 84.313 141.126 84.9637 140.475C85.6143 139.824 86.4968 139.459 87.417 139.459H111.703V87.417C111.703 86.4968 112.069 85.6143 112.719 84.9637C113.37 84.313 114.252 83.9475 115.173 83.9475C116.093 83.9475 116.975 84.313 117.626 84.9637C118.277 85.6143 118.642 86.4968 118.642 87.417V97.8253H142.928C143.848 97.8253 144.731 98.1909 145.381 98.8415C146.032 99.4922 146.398 100.375 146.398 101.295ZM146.398 129.05V142.928C146.398 143.848 146.032 144.731 145.381 145.381C144.731 146.032 143.848 146.398 142.928 146.398C142.008 146.398 141.126 146.032 140.475 145.381C139.824 144.731 139.459 143.848 139.459 142.928V129.05C139.459 128.13 139.824 127.248 140.475 126.597C141.126 125.946 142.008 125.581 142.928 125.581C143.848 125.581 144.731 125.946 145.381 126.597C146.032 127.248 146.398 128.13 146.398 129.05Z"
              fill="black"
            />
          </svg>
        </button>
      </div>

      <Elipse color={theme.activeTextColor} />
    </motion.section>
  );
};

export default Payment;
